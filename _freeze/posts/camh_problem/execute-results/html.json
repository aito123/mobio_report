{
  "hash": "59e83ab8682b671b70a17c5f3716e96d",
  "result": {
    "markdown": "---\ntitle: \"CAMH sid issue\"\ndate: 2023-03-05\nauthor: Santiago Sotelo\n---\n\n::: {.cell}\n\n:::\n\n\n## Problem\n\n-   In communication with Alexander Daros from CAMH Institute, it is informed that there is a problem with `sid` code of some users that are been defaulted to `null`\n\n## Objectives\n\n1.  Identify the CAMH observation with sid defaulted to `null` and other problems in `sid` variable.\n\nFor the purpose of this report, we are going to use the data from BecharaReport API gathered in 2023-03-04. This data has 1'780'739 observations and 80 variables, and can be found in the following Dropbox path:\n\n`Mobio Interactive Dropbox/Research/RWD/Shared R Scripts/Input csv/BecharaReportFull-2023-03-04T05_15_17.csv`\n\nAfter applying the procedure to reduce the number of duplicates in the data, we have 71'897 observations in data.\n\nLet's enumerate the issues with CAMH `sid` variable:\n\n## Identifying null observations\n\nAlex already identified half of CAMH users with `null` sid,  using `coupon_code` variable, and provided the following conversion:\n\n| coupon_code | current_sid | new_sid   |\n|-------------|-------------|-----------|\n| ufbtyvp2    | null        | camh_7004 |\n| jgsnb6d8    | null        | camh_7007 |\n| p5xmktv8    | null        | camh_7025 |\n| mengc4dt    | null        | camh_7034 |\n| a4ph6gp8    | null        | camh_7034 |\n| 3v4jcxnc    | null        | camh_7037 |\n| ydxbcyqu    | null        | camh_7026 |\n| bxab7jeh    | null        | camh_7053 |\n| zqr73whw    | null        | camh_7057 |\n| yd5vnj95    | null        | camh_7068 |\n| wg3wx7ak    | null        | camh_7073 |\n| 66gp5h94    | null        | camh_7078 |\n| r65y6hp7    | null        | camh_7077 |\n| xjeg249g    | null        | camh_7076 |\n| 45j4vt7v    | null        | camh_7086 |\n| vt6xbrbr    | null        | camh_7096 |\n| n8bvq4up    | null        | camh_7094 |\n| s9j2wjnu    | null        | camh_7104 |\n| v53hmcz8    | null        | camh_7104 |\n| phhpyzv3    | null        | camh_7111 |\n| zxkaa578    | null        | camh_7112 |\n| b5tzbeh4    | null        | camh_7127 |\n| mtn6kp3f    | null        | camh_7131 |\n| xvgaactr    | null        | camh_7137 |\n| jupk62f4    | null        | camh_7141 |\n\n\nThe remaining cases that are `null` are the following:\n\n\n::: {.cell-output-display}\n|coupon_code |current_sid |new_sid |\n|:-----------|:-----------|:-------|\n|6yp59wdk    |camh_null   |        |\n|xkevd9da    |null        |        |\n|f4smzshd    |null        |        |\n|s6dkng9d    |null        |        |\n|28qxp744    |null        |        |\n|kxtf4umn    |null        |        |\n|rzx6q8mt    |null        |        |\n|4njqzx2e    |null        |        |\n|aeyfr9ec    |null        |        |\n|af3u42s6    |null        |        |\n|gdy5ur6n    |null        |        |\n|nbf9zuzc    |null        |        |\n|b3upeaft    |null        |        |\n|eeue6jd4    |null        |        |\n|bfqp35wx    |null        |        |\n|dgsbjt8b    |null        |        |\n|cf42ydk5    |null        |        |\n|rdqhctrf    |null        |        |\n|nqzycgmj    |null        |        |\n|qj3j9sgd    |null        |        |\n|ymhecrng    |null        |        |\n|n6mwhufq    |null        |        |\n|6pe4gw6z    |null        |        |\n|smmeerwr    |camh_null   |        |\n|hkeg45y2    |null        |        |\n|fkduwsss    |null        |        |\n|6uk9kqca    |camh_null   |        |\n|no id       |null        |        |\n|s63yez77    |null        |        |\n|4d5qy3j6    |null        |        |\n|xqrr5tej    |null        |        |\n:::\n\n\n## Fixing CAMH prefix in sid observations\n\nThere are some sid codes that does not have the \"camh_\" prefix. Here a table with the observations with a suggested new `sid`:\n\n\n::: {.cell-output-display}\n|coupon_code |current_sid |new_sid    |\n|:-----------|:-----------|:----------|\n|gjth44kr    |7148        |camh_7148  |\n|4p8zkjmf    |7157        |camh_7157  |\n|tvymhgqz    |7146        |camh_7146  |\n|cjmsh3r9    |7003        |camh_7003  |\n|g6r4wqmr    |9999        |camh_9999  |\n|s8ssgf6t    |7162        |camh_7162  |\n|5ckf36y3    |7151        |camh_7151  |\n|5jn6evad    |7142        |camh_7142  |\n|56skcxn3    |test1       |camh_test1 |\n|dg4fbn77    |7160        |camh_7160  |\n|d6yqdq5w    |test1       |camh_test1 |\n|fg65z37c    |7155        |camh_7155  |\n|b7k7hnex    |7147        |camh_7147  |\n|74du9sm3    |7143        |camh_7143  |\n|tzz63fpn    |7002        |camh_7002  |\n|5af6gxk8    |3           |camh_0003  |\n|efym3a3a    |7152        |camh_7152  |\n|r5g8xjsa    |7001        |camh_7001  |\n|kgp9s879    |7154        |camh_7154  |\n|4uxagkg9    |7153        |camh_7153  |\n|zm7pau7e    |7158        |camh_7158  |\n|2c27t5s7    |7145        |camh_7145  |\n:::\n\n\n## `sid` shared by different users\n\nLastly, the are some CAMH users that share the same `sid` code, which are not null sid's,  or have different coupon codes. For instance:\n\n\n::: {.cell-output-display}\n|coupon_code |sid        |user_uuid                            |\n|:-----------|:----------|:------------------------------------|\n|a4ph6gp8    |camh_7034  |339545c0-4f8d-4df2-90f8-7d8f37c18c56 |\n|yj6p39wx    |camh_7038  |33f81739-97b3-42a5-83b1-14d8121ad7ad |\n|qcqwxhgy    |camh_7040  |3c6ff988-6550-4c31-8fa4-c811bc38c500 |\n|NA          |camh_7091  |4a8ecf6a-f4fd-4c61-ac06-301ca2d43c5f |\n|no id       |camh_7091  |4a8ecf6a-f4fd-4c61-ac06-301ca2d43c5f |\n|q7wqrk7z    |camh_uid   |575564fe-fc8a-494f-83ad-c6894e763c59 |\n|56skcxn3    |test1      |5a172a2d-e3cc-48d2-8927-980f3c592dbf |\n|hd3rwm29    |camh_7056  |5a952d6a-e9db-4265-a12f-04815bc81995 |\n|d6yqdq5w    |test1      |70aface8-1270-4003-9627-3ea3d31a9736 |\n|y6z7tz8p    |camh_7056  |7e7e03a9-7a36-44fd-9719-79ad05104e51 |\n|s9j2wjnu    |camh_7104  |849fb9e1-6f08-4630-bdc2-1cf55dc88dc0 |\n|uwkbkeqs    |camh_7040  |a5af5ce9-8052-4a56-9bf8-8fc531d799e2 |\n|c68xadk2    |camh_7091  |a8368a7e-bf94-47ff-bdae-78c8d606f836 |\n|v53hmcz8    |camh_7104  |bb97727e-1255-45ce-a067-ed8dc388d99b |\n|NA          |camh_99999 |c2917e19-5656-4670-94fa-e8dabbed7e01 |\n|no id       |camh_99999 |c2917e19-5656-4670-94fa-e8dabbed7e01 |\n|h57kgnjw    |camh_7091  |c6941b31-f00a-4ef0-86b9-de342fd99944 |\n|5dr467xr    |camh_7038  |c7746a55-024f-4781-8a87-c584bfc508a4 |\n|mengc4dt    |camh_7034  |c80a272a-92c9-4bb1-adf6-04bc67d1dd49 |\n|NA          |camh_7103  |d4c492cc-9afd-4777-996e-af26ec71a093 |\n|no id       |camh_7103  |d4c492cc-9afd-4777-996e-af26ec71a093 |\n|jun8hgae    |camh_uid   |fb0cb4c2-27d6-4e00-8a9d-b846cad1ea99 |\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}